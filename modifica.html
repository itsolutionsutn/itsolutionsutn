<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>Modificar - IT Solution List</title>
		<meta name="theme-color" content="#fffbfe" />
		<link rel="icon" sizes="32x32" href="favicon.ico" />
		<link rel="manifest" href="site.webmanifest" />
		<script src="ungap/custom-elements.js"></script>

		<script type="module" src="js/configura.js"></script>
		<link rel="stylesheet" href="css/estilos.css" />
		<link rel="stylesheet" href="css/transicion_pestanas.css" />

		<script type="module" src="lib/js/muestraError.js"></script>
		<script type="module" src="lib/js/muestraObjeto.js"></script>
		<script type="module" src="js/bd/pasatiempoBusca.js"></script>
		<script type="module" src="js/bd/pasatiempoElimina.js"></script>
		<script type="module" src="js/bd/pasatiempoModifica.js"></script>
		<script>
			// Obtiene los parámetros de la página.
			const parametros = new URL(location.href).searchParams;

			const paramId = parametros.get("id");
		</script>
	</head>
	<body
		onload="if (paramId !== null) {
    pasatiempoBusca(paramId)
     .then(pasatiempo => {
      if (pasatiempo === undefined) throw new Error('Pasatiempo no encontrado.')
      muestraObjeto(forma, { nombre: { value: pasatiempo.PAS_NOMBRE  } })
     })
     .catch(muestraError)
   }"
	>
  <main>
		<form id="forma" onsubmit="
      event.preventDefault()
      if (paramId !== null) {
        const PAS_ID = paramId
        // Lee el nombre, quitándole los espacios al inicio y al final.
        const PAS_NOMBRE = forma.nombre.value.trim()
        const modelo = { PAS_ID, PAS_NOMBRE }
        pasatiempoModifica(modelo)
        .then(json => location.href = 'index.html')
        .catch(muestraError)
      }"
    >
      <md-top-app-bar class="medium material justificado" headline="h1Headline" role="toolbar">
              
        <button slot="navigation" type="button" class="md-standard-icon-button" onclick="window.location.href='index.html';">
          <span class="material-symbols-outlined">arrow_back</span>
        </button>

        <button type="submit" class="md-standard-icon-button" title="Guardar" slot="action">
          <span class="material-symbols-outlined">save</span>
        </button>

        <button type="button" class="md-standard-icon-button" onclick="window.location.href='ayuda.html';" title="Ayuda" slot="action">
          <span class="material-symbols-outlined">help</span>
        </button>

        <button is="md-overflow-button" slot="action" onclick="overflow.alterna(this)" type="button" class="md-standard-icon-button">
          <span style="color: var(--md-sys-color-on-surface-variant)" class="material-symbols-outlined">
            more_vert
          </span>
        </button>

      </md-top-app-bar>
      <h1>Modificar nota</h1>
			
      <p>
        <label class="md-filled-text-field">
          <input required="" placeholder="Nombre*" name="nombre" value="Cargando&hellip;">
           <span>Nombre *</span>
          <small>Obligatorio</small>
        </label>
      </p>

      <p>
        <label class="md-filled-text-field">
          <input  placeholder="Categoria*" name="categoria" >
           <span>Categoria *</span>
        </label>
      </p>

      <p>
        <label class="md-filled-text-field">
          <textarea rows="3" name="descripcion" ></textarea>
          <span>Dirección</span>
        </label>
      </p>

		</form>
  </main>
  <md-overflow-menu id="overflow">
    <button
      type="button"
      onclick="
        if (paramId !== null && confirm('Confirma la eliminación')) {
          pasatiempoElimina(paramId)
            .then(() => location.href = 'index.html')
            .catch(muestraError)
      }"
    >
      <span class="material-symbols-outlined">delete</span>
      Eliminar
    </button>
  </md-overflow-menu>
	</body>
</html>
